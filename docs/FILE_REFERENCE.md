# File Reference

Complete reference of all files generated by ArchillesDC.

## Root Configuration Files

### `package.json`
Project configuration and dependencies.

### `tsconfig.json`
```json
{
  "compilerOptions": {
    "esModuleInterop": true,
    "skipLibCheck": true,
    "target": "es2022",
    "allowJs": true,
    "resolveJsonModule": true,
    "moduleDetection": "force",
    "isolatedModules": true,
    "verbatimModuleSyntax": true,
    "strict": true,
    "noUncheckedIndexedAccess": true,
    "checkJs": true,
    "lib": ["dom", "dom.iterable", "ES2022"],
    "noEmit": true,
    "module": "ESNext",
    "moduleResolution": "Bundler",
    "jsx": "preserve",
    "plugins": [{ "name": "next" }],
    "incremental": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

### `next.config.js`
```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  eslint: { ignoreDuringBuilds: true },
  typescript: { ignoreBuildErrors: false },
};

export default nextConfig;
```

### `postcss.config.js`
```js
export default {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};
```

### `eslint.config.js`
```js
import { FlatCompat } from "@eslint/eslintrc";

const compat = new FlatCompat({
  baseDirectory: import.meta.dirname,
});

export default [
  ...compat.config({
    extends: ["next/core-web-vitals", "next/typescript"],
    rules: {
      "@typescript-eslint/no-unused-vars": ["warn", { argsIgnorePattern: "^_" }],
      "@typescript-eslint/consistent-type-imports": ["warn", { prefer: "type-imports" }],
    },
  }),
];
```

### `prettier.config.js`
```js
export default {
  semi: true,
  singleQuote: false,
  tabWidth: 2,
  trailingComma: "es5",
  plugins: ["prettier-plugin-tailwindcss"],
};
```

### `.env.example`
```env
# Database
DATABASE_URL="file:./db.sqlite"

# NextAuth
AUTH_SECRET=""
AUTH_URL="http://localhost:3000"

# OAuth (optional)
AUTH_DISCORD_ID=""
AUTH_DISCORD_SECRET=""
AUTH_GITHUB_ID=""
AUTH_GITHUB_SECRET=""
AUTH_GOOGLE_ID=""
AUTH_GOOGLE_SECRET=""
```

### `.gitignore`
```
# Dependencies
node_modules/
.pnp
.pnp.js

# Build
.next/
out/
build/
dist/

# Database
*.sqlite
*.sqlite-journal
prisma/migrations/

# Environment
.env
.env.local
.env.production.local

# Logs
npm-debug.log*
.pnpm-debug.log*

# IDE
.idea/
*.swp
.vscode/

# Testing
coverage/
.nyc_output/

# OS
.DS_Store
Thumbs.db

# Misc
*.pem
*.tsbuildinfo
next-env.d.ts
```

---

## Prisma Files

### `prisma/schema.prisma`
```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  image         String?
  password      String?
  role          String    @default("user")
  lastLoginAt   DateTime?
  settings      Json?

  accounts Account[]
  sessions Session[]
  posts    Post[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model Post {
  id          String    @id @default(cuid())
  title       String
  slug        String    @unique
  content     String
  excerpt     String?
  coverImage  String?
  published   Boolean   @default(false)
  publishedAt DateTime?

  createdBy   User?   @relation(fields: [createdById], references: [id])
  createdById String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([createdById])
  @@index([published])
}
```

### `prisma/seed.ts`
```ts
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

async function main() {
  console.log("ðŸŒ± Seeding database...");

  // Create default admin user
  await prisma.user.upsert({
    where: { email: "admin@example.com" },
    update: {},
    create: {
      email: "admin@example.com",
      name: "Admin User",
      role: "admin",
    },
  });

  console.log("âœ… Seeding complete!");
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
```

---

## Source Files

### `src/env.js`
Environment validation using `@t3-oss/env-nextjs`.

### `src/server/db.ts`
```ts
import { PrismaClient } from "@prisma/client";

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const db =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: process.env.NODE_ENV === "development"
      ? ["query", "error", "warn"]
      : ["error"],
  });

if (process.env.NODE_ENV !== "production") globalForPrisma.prisma = db;
```

---

## App Files

### `src/app/layout.tsx`
Root layout with providers.

### `src/app/page.tsx`
Home page.

### `src/app/error.tsx`
Error boundary component.

### `src/app/not-found.tsx`
404 page.

### `src/app/loading.tsx`
Global loading state.

---

## Auth Files

### `src/server/auth/config.ts`
NextAuth configuration with providers and callbacks.

### `src/server/auth/index.ts`
Auth helpers: `auth()`, `getCurrentUser()`, `requireAuth()`, `requireRole()`.

### `src/server/auth/actions.ts`
Server actions for sign in/out, register.

### `src/components/auth/role-guard.tsx`
Server component for role-based access.

### `src/lib/auth-middleware.ts`
Middleware for route protection.

### `src/types/auth.ts`
Auth types and role definitions.

---

## tRPC Files

### `src/server/api/trpc.ts`
tRPC configuration with procedures:
- `publicProcedure`
- `protectedProcedure`
- `adminProcedure`
- `rateLimitedProcedure`

### `src/server/api/root.ts`
Root router combining all routers.

### `src/server/api/routers/post.ts`
Post CRUD router.

### `src/server/api/routers/user.ts`
User profile router.

### `src/server/api/routers/admin.ts`
Admin operations router.

### `src/trpc/react.tsx`
React Query provider and hooks.

### `src/trpc/server.ts`
Server-side tRPC caller.

### `src/trpc/query-client.ts`
Query client configuration.

---

## Component Files

### UI Components (`src/components/ui/`)

| File | Component | Description |
|------|-----------|-------------|
| `button.tsx` | `Button` | Button with variants |
| `input.tsx` | `Input` | Text input with label/error |
| `card.tsx` | `Card` | Card container |
| `badge.tsx` | `Badge` | Status badge |
| `avatar.tsx` | `Avatar` | User avatar |
| `spinner.tsx` | `Spinner` | Loading spinner |
| `toast.tsx` | `ToastProvider`, `useToast` | Toast notifications |
| `modal.tsx` | `Modal` | Modal dialog |
| `table.tsx` | `Table` | Data table |
| `stats.tsx` | `StatCard` | Statistics card |
| `select.tsx` | `Select` | Select dropdown |
| `checkbox.tsx` | `Checkbox` | Checkbox input |
| `textarea.tsx` | `Textarea` | Textarea input |
| `container.tsx` | `Container` | Layout container |

### Layout Components (`src/components/layout/`)

| File | Component | Description |
|------|-----------|-------------|
| `sidebar.tsx` | `Sidebar` | Collapsible sidebar |
| `header.tsx` | `Header` | Page header |

---

## Utility Files

### `src/utils/cn.ts`
```ts
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### `src/utils/formatters.ts`
Date, number, currency, and string formatting utilities.

### `src/utils/constants.ts`
Application constants (routes, status codes, etc.).

### `src/lib/logger.ts`
Structured logging utility.

### `src/lib/error-handler.ts`
Error handling utilities.

### `src/lib/crud-helper.ts`
CRUD operation helpers for tRPC.

### `src/lib/validators.ts`
Zod schemas for common validations.

### `src/hooks/index.ts`
Custom React hooks:
- `useDebounce`
- `useLocalStorage`
- `useClickOutside`
- `useWindowSize`
- `useCopyToClipboard`
- `useKeyboardShortcut`
- `useToggle`
- `useAsync`

### `src/types/index.ts`
Common TypeScript types and interfaces.

---

## Style Files

### `src/styles/globals.css`
```css
@import "tailwindcss";

@theme {
  --color-background: #0a0a0f;
  --color-surface: #12121a;
  --color-primary: #7c3aed;
  --font-sans: "Inter", system-ui, sans-serif;
}

body {
  font-family: var(--font-sans);
  background: var(--color-background);
}
```

---

## Public Files

### `public/favicon.svg`
Default SVG favicon.
